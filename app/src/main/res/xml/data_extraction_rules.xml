<?xml version="1.0" encoding="utf-8"?>
<!--
   Data extraction rules for Android 12+ (API 31+)
   Controls what data can be backed up and transferred during device migration
   See https://developer.android.com/about/versions/12/backup-restore#xml-changes
-->
<data-extraction-rules>
    <!-- Cloud backup rules (Google Drive) -->
    <cloud-backup>
        <!-- Exclude user-specific gamification data -->
        <!-- DataStore files are stored in the 'files/datastore' directory -->
        <exclude domain="file" path="datastore/user_*_gamification.preferences_pb" />

        <!-- Exclude global settings -->
        <exclude domain="file" path="datastore/settings.preferences_pb" />

        <!-- Exclude local database -->
        <exclude domain="database" path="kamus_korea.db" />
        <exclude domain="database" path="kamus_korea.db-shm" />
        <exclude domain="database" path="kamus_korea.db-wal" />

        <!-- Exclude cache -->
        <exclude domain="file" path="cache/" />
    </cloud-backup>

    <!-- Device-to-device transfer rules -->
    <device-transfer>
        <!-- Exclude user-specific gamification data from device transfer -->
        <!-- DataStore files are stored in the 'files/datastore' directory -->
        <exclude domain="file" path="datastore/user_*_gamification.preferences_pb" />

        <!-- Exclude database from transfer (user should start fresh) -->
        <exclude domain="database" path="kamus_korea.db" />
        <exclude domain="database" path="kamus_korea.db-shm" />
        <exclude domain="database" path="kamus_korea.db-wal" />

        <!-- Allow settings transfer (optional - can be excluded too) -->
        <!-- <exclude domain="file" path="datastore/settings.preferences_pb" /> -->
    </device-transfer>
</data-extraction-rules>
